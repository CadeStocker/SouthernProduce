<!-- filepath: /Users/cadestocker/Desktop/SouthernProduce/ProducePricer/producepricer/templates/price.html -->
{% extends "base.html" %}

{% block content %}
<div class="container-fluid mt-4">
    <h1 class="mb-4">Item Pricing</h1>

    <!-- Search form -->
    <form method="GET" action="{{ url_for('price') }}" class="form-inline mb-3">
        <input
            type="text"
            name="q"
            class="form-control mr-2"
            placeholder="Search items..."
            value="{{ q }}"
        >
        <button type="submit" class="btn btn-outline-primary mr-2">Search</button>
        {% if q %}
            <a href="{{ url_for('price') }}" class="btn btn-link">Clear</a>
        {% endif %}
    </form>

    {% if items %}
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Item Pricing Details</h5>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Item Name</th>
                    <th>Item Code</th>
                    <th>Case Weight</th>
                    <th>Total Cost</th>
                    <th>Cost/LB</th>
                    <th>Cost/Oz</th>
                    <th>Labor</th>
                    <th>Packaging Cost</th>
                    <th>Ranch</th>
                    <th>Unit Cost</th>
                    <th>25% Rounded</th>
                    <th>30% Rounded</th>
                    <th>35% Rounded</th>
                    <th>40% Rounded</th>
                    <th>45% Rounded</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
        <tr>
            <td>
                <a href="{{ url_for('view_item', item_id=item.id) }}">
                    {{ item.name }}
                </a>
            </td>
            <td>{{ item.code }}</td>
            <td>{{ item.case_weight }} lbs</td>
            <td>${{ item.total_cost }}</td>
            <td>${{ item.cost_per_lb }}</td>
            <td>${{ item.cost_per_oz }}</td>
            <td>${{ item.labor_cost }}</td>
            <td>${{ item.packaging_cost }}</td>
            <td>${{ item.ranch_cost }}</td>
            <td>${{ item.unit_cost }}</td>
            <td>${{ item.rounded_25 }}</td>
            <td>${{ item.rounded_30 }}</td>
            <td>${{ item.rounded_35 }}</td>
            <td>${{ item.rounded_40 }}</td>
            <td>${{ item.rounded_45 }}</td>
        </tr>
    {% endfor %}
            </tbody>
        </table>
    </div>
    
    {% else %}
        <p>No items found for your company.</p>
    {% endif %}
</div>
{% endblock %}